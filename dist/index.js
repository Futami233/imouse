var e,t=require("react"),o=(e=require("react-dom"))&&"object"==typeof e&&"default"in e?e.default:e,n=function(){this.isVisible=!1,this.isActive=!1,this.isSelection=!1,this.cursorLeft=0,this.cursorTop=0},i=function(e){function i(t){var o=this;e.call(this,t),this.handleMouseMove=function(e){var t=e.pageX-window.scrollX,n=e.pageY-window.scrollY;o.setState({isVisible:!0,cursorLeft:t,cursorTop:n,isSelection:!document.getSelection().isCollapsed})},this.handleMouseOver=function(e){var t=e.target;o.state.hoverTarget!==t&&(t instanceof HTMLElement&&t.matches(o.props.hoverSelector)?o.setState({hoverTarget:t}):o.setState({hoverTarget:null}))},this.handleMouseLeave=function(){o.setState({isVisible:!1})},this.handleMouseDown=function(){o.setState({isActive:!0})},this.handleMouseUp=function(){o.setState({isActive:!1,isSelection:!document.getSelection().isCollapsed})},this.handleDragStart=function(e){e.preventDefault()},this.state=new n}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.getMountpoint=function(){var e=document.querySelector("."+this.MOUNTPOINT_CLASS);return null==e&&((e=document.createElement("div")).className=this.MOUNTPOINT_CLASS,document.body.appendChild(e)),e},i.init=function(e){void 0===e&&(e={});try{var n=this;return null!=n.instance?Promise.resolve(n.instance):Promise.resolve(n.instance=new Promise(function(r){o.render(t.createElement(i,Object.assign({},e,{ref:r})),n.getMountpoint())}))}catch(e){return Promise.reject(e)}},i.prototype.componentDidMount=function(){i.instance=this,document.body.addEventListener("mousemove",this.handleMouseMove),document.body.addEventListener("mouseover",this.handleMouseOver),document.body.addEventListener("mouseleave",this.handleMouseLeave),document.body.addEventListener("mousedown",this.handleMouseDown),document.body.addEventListener("mouseup",this.handleMouseUp),document.body.addEventListener("dragstart",this.handleDragStart)},i.prototype.componentWillUnmount=function(){i.instance=null,document.body.removeEventListener("mousemove",this.handleMouseMove),document.body.removeEventListener("mouseover",this.handleMouseOver),document.body.removeEventListener("mouseleave",this.handleMouseLeave),document.body.removeEventListener("mousedown",this.handleMouseDown),document.body.removeEventListener("mouseup",this.handleMouseUp),document.body.removeEventListener("dragstart",this.handleDragStart)},i.prototype.getStyles=function(){var e=this.props,t=e.defaultSize,o=e.activeSize,n=e.hoverPadding,i=e.activePadding,r=e.hoverRadius,s=e.activeRadius,a=e.selectionWidth,d=e.selectionHeight,u=e.selectionRadius,l=e.blurRadius,c=this.state,h=c.isActive,p=c.isSelection,v=c.hoverTarget,m=c.cursorLeft,f=c.cursorTop,g=Object.assign({},e.style,{position:"fixed",cursor:"none",zIndex:1e7,pointerEvents:"none",opacity:c.isVisible?1:0,backgroundColor:h?e.activeBackgroundColor:e.defaultBackgroundColor,transformOrigin:"center",transitionDuration:e.transitionDuration+"ms",transitionProperty:"width, height, transform, border-radius, background-color, backdrop-filter, -webkit-backdrop-filter"});if(v){var b=v.getBoundingClientRect(),y=h?i:n,S=h?s:r,x=b.left+b.width/2,M=b.top+b.height/2,L=b.width+2*y,E=b.height+2*y;g.left=m+"px",g.top=f+"px",g.width=L+"px",g.height=E+"px",g.transform="translate("+(x-m-L/2)+"px,"+(M-f-E/2)+"px)",g.borderRadius=S+"px"}else if(p)g.left=m+"px",g.top=f+"px",g.width=a+"px",g.height=d+"px",g.transform="translate("+-a/2+"px,"+-d/2+"px)",g.borderRadius=u+"px",g.backdropFilter="blur("+l+"px)",g.WebkitBackdropFilter="blur("+l+"px)";else{var w=h?o:t,k=w/2;g.left=m+"px",g.top=f+"px",g.width=w+"px",g.height=w+"px",g.transform="translate("+-k+"px,"+-k+"px)",g.borderRadius=k+"px",g.backdropFilter="blur("+l+"px)",g.WebkitBackdropFilter="blur("+l+"px)"}return g},i.prototype.render=function(){return t.createElement(t.Fragment,null,t.createElement("div",{style:this.getStyles()}),t.createElement("style",null,":root, * { cursor: none !important; }"))},i.prototype.destroy=function(){var e=i.getMountpoint();o.unmountComponentAtNode(e),document.body.removeChild(e)},i}(t.Component);i.instance=null,i.MOUNTPOINT_CLASS="imouse-mountpoint",i.defaultProps={defaultBackgroundColor:"rgba(0, 0, 0, .2)",activeBackgroundColor:"rgba(0, 0, 0, .4)",defaultSize:20,activeSize:15,hoverPadding:10,hoverRadius:10,activePadding:5,activeRadius:5,selectionWidth:3,selectionHeight:40,selectionRadius:2,hoverSelector:"a",transitionDuration:200,blurRadius:10,style:{}},module.exports=i;
//# sourceMappingURL=index.js.map
